@using Web.App.TagHelpers
@model Web.App.ViewModels.LocalAuthorityViewModel
@{
    ViewData[ViewDataKeys.Title] = PageTitles.LocalAuthorityHighNeeds;
}

@await Component.InvokeAsync("EstablishmentHeading", new
{
    title = ViewData[ViewDataKeys.Title],
    name = Model.Name,
    id = Model.Code,
    kind = OrganisationTypes.LocalAuthority
})

@await Component.InvokeAsync("DataSource", new
{
    organisationType = OrganisationTypes.LocalAuthority,
    sourceType = DataSourceTypes.HighNeeds,
    additionText = new[] { "Lorem ipsum dolor sit amet, consectetur adipiscing elit." }
})

<div class="dashboard-row">
    <div class="dashboard-column-full">
        <div class="govuk-summary-card">
            <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Benchmark high needs data</h2>
            </div>
            <div class="govuk-summary-card__content">
                <p class="govuk-body">
                    Benchmark spending against statistical neighbours or other local authorities of your choice.
                </p>
                <a href="@Url.Action("Index", "LocalAuthorityHighNeedsBenchmarking", new
                         {
                             code = Model.Code
                         })" role="button" class="govuk-button govuk-button--primary" data-module="govuk-button">
                    Start benchmarking
                </a>
            </div>
        </div>
    </div>
</div>

<div class="dashboard-row">
    <div class="dashboard-column-one-half">
        <div class="govuk-summary-card">
            <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">National Ranking</h2>
            </div>
            <div class="govuk-summary-card__content">
                @await Component.InvokeAsync("LocalAuthorityHighNeedsNationalRankings", new
                {
                    identifier = Model.Code
                })
            </div>
        </div>
    </div>
    <div class="dashboard-column-one-half">
        <div class="govuk-summary-card">
            <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">Budget vs spend (historical view)</h2>
            </div>
            <div class="govuk-summary-card__content">
                @await Component.InvokeAsync("LocalAuthorityHighNeedsHistory", new
                {
                    identifier = Model.Code
                })
            </div>
        </div>
    </div>
</div>

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

@await Component.InvokeAsync("LocalAuthorityHighNeedsHelp")

<hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">

@await Component.InvokeAsync("LocalAuthorityFinanceTools", new
{
    identifier = Model.Code,
    tools = new[] { FinanceTools.CompareYourCosts, FinanceTools.BenchmarkCensus }
})

@section scripts
{
    <script type="module" add-nonce="true">
        import {initAll} from '/js/govuk-frontend.min.js'

        initAll()
    </script>
}