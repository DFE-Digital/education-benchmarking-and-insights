@using Web.App.Domain
@using Web.App.Extensions
@using Web.App.ViewModels
<p class="govuk-body">
    Use these resources to help reduce your spending and costs.
</p>

<p class="govuk-body">
    You can also @Html.TrackedAnchor(
                     TrackedLinks.CommercialResource,
                     "https://www.gov.uk/guidance/find-a-dfe-approved-framework-for-your-school",
                     "find a framework agreement for goods or services",
                     "(opens in a new window)",
                     "_blank",
                     ["noopener", "noreferrer", "external"]).
</p>

<div class="govuk-accordion" data-module="govuk-accordion" id="accordion-resources">
    @for (var i = 0; i < Lookups.CategoryResourcePartialMap.Count; i++)
    {
        var j = i + 1;
        <div class="govuk-accordion__section">
            <div class="govuk-accordion__section-header">
                <h2 class="govuk-accordion__section-heading">
                    <span class="govuk-accordion__section-button" id="accordion-resources-heading-@j">
                        @Lookups.CategoryResourcePartialMap.ElementAt(i).Key
                    </span>
                </h2>
            </div>
            <div id="accordion-resources-content-@j" class="govuk-accordion__section-content">
                @await Html.PartialAsync(Lookups.CategoryResourcePartialMap.ElementAt(i).Value, new ResourceViewModel())
            </div>
        </div>
    }
</div>