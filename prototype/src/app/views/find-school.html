{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% extends "layouts/main.html" %}

{% block pageTitle %}
  Find a school - {{ data['school-name'] }} â€“ {{ serviceName }}
{% endblock %}

{% block content %}

{% set schoolsHtml %}

{{ xGovukAutocomplete({
    id: "school",
    name: "school",
    allowEmpty: false,
    hint: {
        text: "Search by name, URN, keyword or location"
    },
    errorMessage: null if errorThisPage != 'true' else { html: errorText },
    items: schools
  }) }}
  
{% endset -%}

{% set trustsHtml %}

{{ govukInput({
    id: "trust-name",
    name: "trustName",
    hint: {
      text: "Enter a name or company number"
    }
  }) }}
{% endset -%}

{% set authorityHtml %}

{{ xGovukAutocomplete({
    id: "authority-name",
    name: "authorityName",
    allowEmpty: false,
    hint: {
        text: "Enter a local authority name or a three-digit LA code"
    },
    errorMessage: null if errorThisPage != 'true' else { html: errorText },
    items: authorities
  }) }}
  
{% endset -%}

<form method="post" action="set-school" class="form">

    <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">

                {{ govukRadios({
                name: "signIn",
                fieldset: {
                    legend: {
                        text: "Select an organisation type",
                        isPageHeading: true,
                        classes: "govuk-fieldset__legend--l"
                    }
                },
                items: [
                    {
                        value: "academy",
                        text: "Academy or Local Authority maintained school",
                        checked: true,
                        conditional: {
                            html: schoolsHtml
                        },
                        checked: checked("signIn", "academy")
                    },
                    {
                        value: "trust",
                        text: "Single or Multi-Academy Trust",
                        conditional: {
                            html: trustsHtml
                        },
                        checked: checked("signIn", "trust")
                    },
                    {
                        value: "authority",
                        text: "Local authority",
                        conditional: {
                            html: authorityHtml
                        },
                        checked: checked("signIn", "authority")
                    }
                ]
                }) }}


            {{ govukButton({
                text: "Continue"
            }) }}

        </div>
    </div>

</form>
{% endblock %}