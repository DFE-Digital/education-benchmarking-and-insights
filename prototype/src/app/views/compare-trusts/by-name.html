{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}

{% extends "layouts/main.html" %}

{% block pageTitle %}
  Compare trusts - {{ data['trust-name'] }} â€“ {{ serviceName }}
{% endblock %}

{% block beforeContent %}

    {{ govukBackLink({
        text: "Back",
        href: "/compare-trusts/characteristics"
    }) }}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
      
    {% if errorThisPage == 'true' %}

      {% set errorText = 'Enter a trust name or company number' %}

      {{ govukErrorSummary
          ({
              titleText: "There is a problem",
              errorList:
              [
                  {
                      text: errorText,
                      href: "#trust"
                  }
              ]
          })
      }}
  {% endif %}

  <span class="govuk-caption-l"><a href="/trust-homepage" class="govuk-link--no-underline">{{ data['trust-name'] }}</a></span>
  <h1 class="govuk-heading-l">Choose trusts</h1>

<!--
  {% if confirmation %}

  {% if confirmation == 'trusts-generated' %}
    {% set html %}
    <p class="govuk-body"><strong>Similar trusts found</strong> - <a href="/compare-trusts/compare">Compare these trusts</a></p>
    {% endset %}

  {% elseif confirmation == 'trust-added' %}
    {% set html %}
    <p class="govuk-body"><strong>{{ ( data['trusts'] | first ).trustName }}</strong> added to similar trusts.</p>
    {% endset %}
  
  {% elseif confirmation == 'trust-removed' %}
    {% set html %}
    <p class="govuk-body"><strong>{{ data['trust-removed'] }}</strong> removed from similar trusts. <a href="/compare-trusts/undo-remove?trustName={{ data['trust-removed'] }}" class="govuk-link">Undo</a>.</p>
    {% endset %}

  {% elseif confirmation == 'trust-reset' %}
    {% set html %}
    <p class="govuk-body"><strong>You have now removed all the similar schools you chose.</strong></p>
    {% endset %}

  {% endif %}
  
    {{ govukNotificationBanner({
      html: html,
      type: "success"
    }) }}

  {% endif %}
  -->

    
      <form action="/compare-trusts/add-trust" method="post">
        <div id="school-search-hint" class="govuk-hint">
          Choose by trust name or company number
        </div>
        <div class="school-search">

            {{ xGovukAutocomplete({
              id: "trust",
              name: "trust",
              allowEmpty: false,
              hint: {
                  text: ""
              },
              errorMessage: null if errorThisPage != 'true' else { html: errorText },
              items: trustRows
            }) }}

            {{ govukButton({
              text: "Choose trust"
            }) }}
        </div>
      </form>
  
      
    {% if data['trusts'] | length %}

    <!--
      {% if trustSetType == 'generated' %}
      <p class="govuk-body">These 10 trusts are the closest matches based on the characteristics you selected.<br />
          <a href="/compare-trusts/characteristics">Change characteristics and generate a new set</a>
      </p>
      {% endif %}
      -->

      <h1 class="govuk-heading-m">Chosen trusts ({{rows.length}})</h1>

      {{ govukButton({
        text: 'Save your set' if data['editSet'] == 'true' else "Create a set using these trusts",
        href: '/loading?redirect=/compare-trusts/compare'
      }) }}

      {{ govukTable({
      firstCellIsHeader: false,
      head: [
        {
          text: "Trust"
        },
        {
          text: "School phase"
        },
        {
          text: "Number of pupils"
        },
        {
          text: "Number of schools"
        },
        {
          text: "Total income"
        },
        {
          text: ""
        }
      ],
      "rows": rows
    }) }}
    
    {% endif %}

    {% if data['trusts'] | length and confirmation != 'trust-reset' %}

    <p class="govuk-body" style="float: right"><a href="/compare-trusts/reset" class="govuk-link">Remove all your choices</a></p>
    {% endif %}


    </div>
</div>

<form method="post"  action="#" class="for4" style=" float: left; position: relative; bottom:-225px;  ">

  <select style="height:30px;" onchange="window.location.href='?'+this.value">

      <option value="errorThisPage=false&errorNoSchool=false"
              {% if errorThisPage != 'true' %}selected{% endif %}>Errors - Off</option>

      <option value="errorThisPage=true&errorNoSchool=true"
              {% if errorNoSchool == 'true' %}selected{% endif %}>Error: No answer entered</option>
  </select>

</form>




{% endblock %}