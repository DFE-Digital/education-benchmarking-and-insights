# Test Plan: Section 251 (S251) Data Release – 2024-2025

## Purpose

This plan defines the QA strategy to validate the Data Release for the **Section 251 (S251) covering the 2024-2025 period**.

The primary focus is ensuring the integrity of the ingestion and transformation pipeline for multiple financial and demographic files into the FBIT platform, the accurate integration of ancillary datasets (EHCP, Statistical Neighbours), and the verification of Local Authority (LA) level data accuracy within the service.

## Scope

### In Scope

- **Schema & Structural Validation:** Strict contract checking for all S251 input files (Budget, Outturn) and ancillary datasets (EHCP, Statistical Neighbours) within this Data Release.
- **End-to-End (E2E) Pipeline:** Monitoring of the data release process from raw file landing to database persistence, ensuring successful integration of budget, outturn logic.
- **Data Reconciliation:** Ensuring database records, row counts, and LA-identifier joins match source file totals.
- **Service/UI Validation:** Functional verification of the FBIT front-end for the 2025 reporting year for Local Authorities.
- **Regression Testing:** Verification that historical S251 data (2024 and prior) remains unchanged during this data release.
- **Ancillary Completeness Reporting:** Quantifying "Data Readiness" for EHCP and statistical neighbor data across all LAs.

### Out of Scope

- Verification of upstream-provided raw data correctness beyond schema.
- ONS Population data (`2018 SNPP Population persons.csv`) as pupil figures from individual schools are utilised instead.

## Test Data Profile

| Category | Files / Sources |
| :--- | :--- |
| **Primary S251 (Budget)** | `plannedexpenditure_schools_other_education_la_unrounded_data.csv` |
| **Primary S251 (Outturn)** | `s251_alleducation_la_regional_national.csv` |
| **Ancillary (EHCP)** | `sen2_estab_caseload.csv` |
| **Ancillary (Stats)** | `High-needs-local-authority-benchmarking-tool.xlsm` (Statistical Neighbours) |

## Test Activities & Methodologies

### Schema & File Integrity Validation

**Goal:** Ensure structural integrity to prevent pipeline failures and schema-level data loss.

- **Constraint Checking:** Validate headers, data types, and mandatory fields (e.g., LA codes, numeric values).
- **Identifier Consistency:** Verify LA codes follow the standard format across all budget and outturn files.
- **Value Validation:** Ensure numeric fields contain valid financial data and date formats are correct.

### Ancillary Data & Completeness Reporting

**Goal:** Identify data gaps for LAs before final processing.

- **Schema Validation:** Validate file structures for EHCP and statistical neighbour datasets.
- **Metrics Generation:** - Identify LAs missing specific ancillary sets.
  - Produce a summary report and completeness table indicating the percentage of data readiness per LA.
- **Deliverables:** Validation scripts, summary report, and completeness table.

### Pipeline Validation

**Goal:** Monitor the automated flow of data through the FBIT ingestion engine.

- **Transformation Monitoring:** Trigger ingestion in Test/Pre-Prod and monitor logs for silent drops or transformation failures.
- **Integration Logic:** Confirm the logic correctly combines budget, outturn, and ancillary data (EHCP/Statistical Neighbours).

### Database Validation

**Goal:** Ensure data persistence and relational integrity.

- **Data Reconciliation:** Query the database for the 2025 S251 data to confirm row counts and key joins reflect source files.
- **Mapping Consistency:** Validate that mappings derived from ancillary sources are present and consistent in the target tables.
- **Regression Guardrails:** Run checksums on historical S251 data to ensure no accidental overwrites occurred.

### Service/UI Validation

**Goal:** Final user acceptance of the data presentation.

- **Year Selection:** Access the service and verify the 2025 toggle loads the correct Local Authority dataset.
- **Metric Accuracy:** Check key metrics and filters (e.g., high-needs benchmarking) for a representative sample of LAs.
- **Fallback States:** Ensure the UI handles missing ancillary data gracefully with documented impact.

## Responsibilities & Environment

### Responsibilities

| Role | Responsibility |
| :--- | :--- |
| **Data Analyst(s)** | Produce and review source S251 and ancillary files for accuracy before the data release. |
| **Data Engineer** | Prepare/supply files, execute pipeline runs, and provide technical logs. |
| **QA Lead** | Prepare test plans; manage execution of schema validation, completeness summary, and UI checks. |
| **Engineer(s)** | Assist in test execution, running validation scripts, and performing regression checks. |
| **Technical Lead** | Oversee the technical quality and architectural integrity of the S251 ingestion pipeline. |
| **Stakeholders** | Conduct User Acceptance Testing (UAT) and provide formal sign-off on integrity and outcomes. |
| **Project Lead** | Final Go/No-Go decision for the S251 Data Release. |

### Environments

- **Test:** Initial schema validation with partial datasets and full E2E ingestion including ancillary integration.
- **Pre-Prod:** Final pipeline run with complete datasets, UAT, and final regression checks.

## Exit Criteria (Sign-off Requirements)

- [x] All S251 file schemas and content validated
- [x] Ancillary file schemas validated and completeness summary produced
- [x] Pipeline completes E2E with no High or Critical errors
- [x] Database reflects accurate 2024-2025 S251 data with expected mappings
- [x] UI/Service displays S251 data appropriately for Local Authorities
- [x] Regression tests confirm no degradation of historical data
- [x] Product Owner/BA sign-off received
